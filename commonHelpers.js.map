{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.svg","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__3108d0c6__\"","export function createMarkup(images) {\n  return images\n    .map(\n      img =>\n        `<li>\n                <a href=\"${img.largeImageURL}\"><img class=\"gallery-img\" src=\"${img.webformatURL}\" alt=\"${img.tags}\"></a>\n                <ul class=\"gallery-list\">\n                    <li>\n                        <h2>Likes</h2>\n                        <p>${img.likes}</p>\n                    </li>\n                    <li>\n                        <h2>Views</h2>\n                        <p>${img.views}</p>\n                    </li>                    \n                    <li>\n                        <h2>Comments</h2>\n                        <p>${img.comments}</p>\n                    </li>                    \n                    <li>\n                        <h2>Downloads</h2>\n                        <p>${img.downloads}</p>\n                    </li>\n                </ul>\n                </li>`\n    )\n    .join('');\n}\n","import axios from 'axios';\n\nexport async function searchImages(value, page) {\n  const URI = 'https://pixabay.com/api/';\n\n  const response = await axios.get(URI, {\n    params: {\n      key: '42515030-f0931f035bd772c998b8c15c1',\n      q: value,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: page,\n    },\n  });\n\n  return response.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport cross from '../src/img/bi_x-octagon.svg';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nimport { createMarkup } from './js/render-functions.js';\nimport { searchImages } from './js/pixabay-api.js';\n\nconst formEl = document.querySelector('.form');\nconst loaderEl = document.querySelector('.loader');\nconst listEl = document.querySelector('.gallery');\nconst buttonLoaderMore = document.querySelector('.load');\nconst loaderMore = document.querySelector('.down');\n\nlet page = 1;\n\nlet value;\n\nformEl.addEventListener('submit', event => {\n  event.preventDefault();\n\n  listEl.innerHTML = '';\n\n  value = event.currentTarget.image_name.value;\n\n  if (value.length === 0 || value.trim() === '') {\n    iziToast.error({\n      title: '',\n      message: 'Could you, please choose some type of photos',\n      class: 'popup-message',\n      theme: 'dark',\n      backgroundColor: '#ef4040',\n      messageColor: '#fff',\n      iconUrl: cross,\n      position: 'topRight',\n      pauseOnHover: true,\n      timeout: 3000,\n    });\n  } else {\n    loaderEl.classList.remove('is-hidden');\n    async function fetchData() {\n      const data = await searchImages(value, page);\n      try {\n        if (data.hits.length === 0) {\n          buttonLoaderMore.classList.add('is-hidden');\n          iziToast.error({\n            title: '',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            class: 'popup-message',\n            theme: 'dark',\n            backgroundColor: '#ef4040',\n            messageColor: '#fff',\n            iconUrl: cross,\n            position: 'topRight',\n            pauseOnHover: true,\n            timeout: 3000,\n          });\n        }\n\n        listEl.innerHTML = createMarkup(data.hits);\n\n        lightbox.refresh();\n        if (data.hits.length >= 15) {\n          buttonLoaderMore.classList.remove('is-hidden');\n        }\n      } catch {\n        iziToast.error({\n          title: '',\n          message: 'Error while loading images!',\n          class: 'popup-message',\n          theme: 'dark',\n          backgroundColor: '#ef4040',\n          messageColor: '#fff',\n          iconUrl: cross,\n          position: 'topRight',\n          pauseOnHover: true,\n          timeout: 3000,\n        });\n      } finally {\n        loaderEl.classList.add('is-hidden');\n        formEl.reset();\n      }\n    }\n    fetchData();\n  }\n});\n\nbuttonLoaderMore.addEventListener('click', () => {\n  buttonLoaderMore.classList.add('is-hidden');\n  loaderMore.classList.remove('is-hidden');\n  page += 1;\n  async function loadMoreImg() {\n    const res = await searchImages(value, page);\n    try {\n      let totalImages = res.hits.length * page;\n      if (totalImages > res.totalHits) {\n        buttonLoaderMore.classlist.add('is-hidden');\n        loaderMore.classList.add('is-hidden');\n        iziToast.error({\n          title: '',\n          message: 'This is all images!',\n          class: 'popup-message',\n          theme: 'dark',\n          backgroundColor: '#ef4040',\n          messageColor: '#fff',\n          iconUrl: cross,\n          position: 'topRight',\n          pauseOnHover: true,\n          timeout: 3000,\n        });\n      }\n      listEl.insertAdjacentHTML('beforeend', createMarkup(res.hits));\n      lightbox.refresh();\n      buttonLoaderMore.classList.remove('is-hidden');\n      loaderMore.scrollIntoView();\n      loaderMore.classList.add('is-hidden');\n    } catch {\n      iziToast.error({\n        title: '',\n        message: 'Error while loading images!',\n        class: 'popup-message',\n        theme: 'dark',\n        backgroundColor: '#ef4040',\n        messageColor: '#fff',\n        iconUrl: cross,\n        position: 'topRight',\n        pauseOnHover: true,\n        timeout: 3000,\n      });\n    }\n  }\n  loadMoreImg();\n});\n"],"names":["cross","createMarkup","images","img","searchImages","value","page","URI","axios","lightbox","SimpleLightbox","formEl","loaderEl","listEl","buttonLoaderMore","loaderMore","event","iziToast","fetchData","data","loadMoreImg","res"],"mappings":"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"}